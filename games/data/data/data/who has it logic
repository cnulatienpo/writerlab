// File: js/who.js

let whoData = [];
let whoIndex = 0;
let currentWho = null;

window.onload = async function () {
  const res = await fetch('../data/who-has-it.json');
  whoData = await res.json();
  whoIndex = 0;
  showWho();
};

function showWho() {
  currentWho = whoData[whoIndex];
  document.getElementById('who-text').textContent = currentWho.text;
  document.getElementById('who-element').textContent = currentWho.element;
  document.getElementById('who-feedback').style.display = 'none';
  document.getElementById('who-choice').style.display = 'block';
}

function submitWho(choice) {
  const correct = currentWho.correct;
  const feedback = currentWho.feedback;
  let text = '';
  if (choice === correct) {
    text = `✅ Correct! ${feedback}`;
  } else {
    text = `❌ Not quite. ${feedback}`;
  }
  document.getElementById('who-feedback-text').textContent = text;
  document.getElementById('who-feedback').style.display = 'block';
  document.getElementById('who-choice').style.display = 'none';
}

function nextWho() {
  whoIndex++;
  if (whoIndex >= whoData.length) {
    whoIndex = 0;
    alert('That was the last one! Starting over.');
  }
  showWho();
}
